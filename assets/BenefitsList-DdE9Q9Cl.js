import{h as S}from"./userManage-Bc71VNro.js";import{l as I,r as j,j as f,i as b,w as l,n as T,T as q,o as c,a as e,c as z,m as E,F as L,b as p,q as M,h as v,t as U,k as y,x as W,e as u,s as Q}from"./index-1oJpBZSA.js";const A={style:{display:"flex","align-items":"center"}},O={__name:"BenefitsList",setup(G){const w=I(),g=j({searchType:"",value:"",status:""}),h=f(),V=f(),k=f(),B=()=>{V.value.query()},C=()=>{h.value.resetFields(),g.searchType=""},x=m=>{const a=m.uid?[m]:k.value.getSelectionRows();if(a&&a.length===0){y().warning("未选择");return}W().warning("您正在操作作废").then(()=>{y().success("成功")}).catch(()=>{y().info("已经取消")})};return(m,a)=>{const r=u("el-option"),_=u("el-select"),D=u("el-input"),d=u("el-form-item"),i=u("el-button"),R=u("el-form"),o=u("el-table-column"),F=u("el-avatar"),N=u("el-table"),$=Q("loading");return c(),b(q,{ref_key:"listWrapRef",ref:V,"remote-method":T(S),query:g},{query:l(({query:n})=>[e(R,{ref_key:"queryForm",ref:h,model:n,inline:""},{default:l(()=>[e(d,{prop:"value"},{default:l(()=>[e(D,{placeholder:"请输入",modelValue:n.value,"onUpdate:modelValue":t=>n.value=t},{prepend:l(()=>[e(_,{modelValue:n.searchType,"onUpdate:modelValue":t=>n.searchType=t,style:{width:"100px"}},{default:l(()=>[e(r,{label:"UID",value:"1"}),e(r,{label:"身份证号",value:"2"}),e(r,{label:"名称",value:"3"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(d,{label:"状态",prop:"status"},{default:l(()=>[e(_,{modelValue:n.status,"onUpdate:modelValue":t=>n.status=t,placeholder:"请选择",clearable:"",style:{width:"100px"}},{default:l(()=>[e(r,{label:"正常",value:1}),e(r,{label:"禁用",value:2})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(d,{label:"套餐",prop:"status"},{default:l(()=>[e(_,{placeholder:"请选择",clearable:"",style:{width:"100px"}},{default:l(()=>[(c(!0),z(L,null,E(T(w).find("vipTypes"),t=>(c(),b(r,{key:t.label,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(i,{type:"primary",onClick:B},{default:l(()=>a[0]||(a[0]=[p("查询")])),_:1}),e(i,{onClick:C},{default:l(()=>a[1]||(a[1]=[p("重置")])),_:1})]),_:1}),e(d,null,{default:l(()=>[e(i,{type:"danger",onClick:x},{default:l(()=>a[2]||(a[2]=[p("批量作废")])),_:1})]),_:1})]),_:2},1032,["model"])]),default:l(({list:n,loading:t})=>[M((c(),b(N,{ref_key:"tableRef",ref:k,data:n},{default:l(()=>[e(o,{type:"selection",width:"55"}),e(o,{prop:"id",label:"ID"}),e(o,{prop:"uid",label:"UID"}),e(o,{label:"用户",width:"200"},{default:l(({row:s})=>[v("div",A,[e(F,{size:"small",src:s.headimg,style:{"margin-right":"4px"}},{default:l(()=>a[3]||(a[3]=[v("img",{src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"},null,-1)])),_:2},1032,["src"]),v("span",null,U(s.nickname),1)])]),_:1}),e(o,{prop:"vipName",label:"套餐"}),e(o,{prop:"ruleName",label:"内容"}),e(o,{label:"剩余数量/数量"},{default:l(({row:s})=>[p(U(`${s.surplusValue}${s.unit} / ${s.value}${s.unit}`),1)]),_:1}),e(o,{prop:"expiryTime",label:"时间/过期时间"}),e(o,{label:"操作"},{default:l(({row:s})=>[e(i,{onClick:H=>x(s),size:"small",type:"danger",plain:""},{default:l(()=>a[4]||(a[4]=[p("作废 ")])),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data"])),[[$,t]])]),_:1},8,["remote-method","query"])}}};export{O as default};
