import{_ as H,o as b,c as A,f as K,t as c,g as W,h as f,e as u,a as e,w as l,b as o,i as U,j as q,r as M,k as F,l as G,F as N,m as j,n as O,p as P,T as E,q as Q,v as te,s as X,x as ee}from"./index-CvmMRuQj.js";import{_ as ae,a as le,b as ne,c as oe,d as ue,e as Y,f as se,g as Z}from"./userManage-CHI5A_Af.js";const re={class:"item"},de={key:0,class:"label"},ie={class:"content"},pe={__name:"UserInfoItem",props:{label:String,labelWidth:{type:[String,Number],default:200}},setup(g){return(h,x)=>(b(),A("div",re,[K(h.$slots,"label",{},()=>[g.label?(b(),A("div",de,c(g.label),1)):W("",!0)],!0),f("div",ie,[K(h.$slots,"default",{},void 0,!0)])]))}},z=H(pe,[["__scopeId","data-v-c52e857c"]]),me={style:{display:"flex","align-items":"center"}},_e={__name:"Userinfo",props:{user:{type:[Object],default:()=>({})}},setup(g){const h=g;return(x,r)=>{const y=u("el-avatar"),d=u("el-button");return b(),A("div",null,[e(z,{label:"UID"},{default:l(()=>[o(c(g.user.uid),1)]),_:1}),e(z,{label:"用户"},{default:l(()=>[f("div",me,[g.user.headimg?(b(),U(y,{key:0,src:g.user.headimg,size:"small",style:{"margin-right":"4px"}},null,8,["src"])):W("",!0),f("span",null,c(g.user.nickname),1)])]),_:1}),e(z,{label:"账号"},{default:l(()=>[o(c(g.user.user),1)]),_:1}),e(z,{label:"手机号"},{default:l(()=>[o(c(g.user.mobile),1)]),_:1}),e(z,{label:"邮箱"},{default:l(()=>[o(c(g.user.email),1)]),_:1}),e(z,{label:"实名"},{default:l(()=>[o(c(g.user.isRealName),1)]),_:1}),e(z,{label:"当前身份"},{default:l(()=>[o(c(g.user.roleType),1)]),_:1}),e(z,{label:"绑定微信"},{default:l(()=>[o(c(h.isBindWechat),1)]),_:1}),f("div",null,[e(d,{size:"small",type:"primary"},{default:l(()=>r[0]||(r[0]=[o("登录日志")])),_:1}),e(d,{size:"small",type:"danger"},{default:l(()=>r[1]||(r[1]=[o("操作日志")])),_:1})])])}}},fe={style:{display:"flex","align-items":"center"}},ce={__name:"userEditForm",props:{title:{default:"",type:String},showClose:{default:!1,type:Boolean},closeOnClickModal:{default:!1,type:Boolean},onSuccess:{default:()=>{}}},setup(g,{expose:h}){const x=g,r=q(),y=q(!1),d=M({headImg:"",nickname:"aaa",roleType:"1",password:"1234556",mobile:"15588513522",userStatus:"1",email:"",syncFlag:"",unbind:[]}),D=M({headImg:[],nickname:[{required:!0,message:"必填"}],roleType:[{required:!0,message:"必填"}],password:[{required:!0,message:"必填"}],userStatus:[{required:!0,message:"必填"}],mobile:[{required:!0,message:"必填"}]}),$=async()=>{try{await r.value.validate(),await ae(d),F().success("成功"),y.value=!1,x.onSuccess&&x.onSuccess()}catch(w){console.log(w),F().error("失败")}},m=()=>{r.value.resetFields()};return h({open(w){w&&Object.assign(d,w),y.value=!0},close(){y.value=!1}}),(w,s)=>{const _=u("el-button"),a=u("el-form-item"),t=u("el-input"),V=u("el-radio"),k=u("el-radio-group"),v=u("Warning"),p=u("el-icon"),R=u("el-tooltip"),T=u("el-checkbox"),C=u("el-checkbox-group"),B=u("el-form"),I=u("el-drawer");return b(),U(I,{modelValue:y.value,"onUpdate:modelValue":s[9]||(s[9]=n=>y.value=n),direction:"rtl","destroy-on-close":!0,closeOnClickModal:g.closeOnClickModal},{header:l(()=>[f("h3",null,c(g.title),1)]),default:l(()=>[e(B,{ref_key:"formRef",ref:r,"label-width":"auto",model:d,rules:D,"label-position":"right"},{default:l(()=>[e(a,{label:"头像",prop:"headImage"},{default:l(()=>[e(_,{type:"primary"},{default:l(()=>s[10]||(s[10]=[o("选择文件")])),_:1}),o(" "+c(d.headImg),1)]),_:1}),e(a,{label:"昵称",required:"",prop:"nickname"},{default:l(()=>[e(t,{modelValue:d.nickname,"onUpdate:modelValue":s[0]||(s[0]=n=>d.nickname=n)},null,8,["modelValue"])]),_:1}),e(a,{label:"账号",prop:"user"},{default:l(()=>[e(t,{modelValue:d.user,"onUpdate:modelValue":s[1]||(s[1]=n=>d.user=n)},null,8,["modelValue"])]),_:1}),e(a,{label:"身份",required:"",prop:"roleType"},{default:l(()=>[e(k,{modelValue:d.roleType,"onUpdate:modelValue":s[2]||(s[2]=n=>d.roleType=n)},{default:l(()=>[e(V,{value:"1"},{default:l(()=>s[11]||(s[11]=[o("个人[默认]")])),_:1}),e(V,{value:"2"},{default:l(()=>s[12]||(s[12]=[o("企业")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(a,{label:"密码",required:"",prop:"password"},{default:l(()=>[e(t,{modelValue:d.password,"onUpdate:modelValue":s[3]||(s[3]=n=>d.password=n)},null,8,["modelValue"])]),_:1}),e(a,{label:"状态",required:"",prop:"userStatus"},{default:l(()=>[e(k,{modelValue:d.userStatus,"onUpdate:modelValue":s[4]||(s[4]=n=>d.userStatus=n)},{default:l(()=>[e(V,{value:"1"},{default:l(()=>s[13]||(s[13]=[o("启用[默认]")])),_:1}),e(V,{value:"2"},{default:l(()=>s[14]||(s[14]=[o("禁用")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(a,{label:"手机号",required:"",prop:"mobile"},{default:l(()=>[e(t,{modelValue:d.mobile,"onUpdate:modelValue":s[5]||(s[5]=n=>d.mobile=n)},null,8,["modelValue"])]),_:1}),e(a,{label:"   ",prop:"syncFlag"},{default:l(()=>[e(T,{"true-value":"1","false-value":"0",modelValue:d.syncFlag,"onUpdate:modelValue":s[6]||(s[6]=n=>d.syncFlag=n)},{default:l(()=>[f("p",fe,[s[15]||(s[15]=f("span",{style:{"margin-right":"3px"}},"新手机号存在时自动过户",-1)),e(R,{effect:"dark",content:`过户会清除绑定邮箱、账号、第三方绑定账户
两个账户的用户数据会对换`},{default:l(()=>[e(p,null,{default:l(()=>[e(v)]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),_:1}),e(a,{label:"邮箱",prop:"email"},{default:l(()=>[e(t,{modelValue:d.email,"onUpdate:modelValue":s[7]||(s[7]=n=>d.email=n)},null,8,["modelValue"])]),_:1}),e(a,{label:"解绑",prop:"unbind"},{default:l(()=>[e(C,{modelValue:d.unbind,"onUpdate:modelValue":s[8]||(s[8]=n=>d.unbind=n)},{default:l(()=>[e(T,{value:"1",label:"QQ"}),e(T,{value:"2",label:"微信"}),e(T,{value:"3",label:"AppleID"})]),_:1},8,["modelValue"])]),_:1}),e(a,{label:" "},{default:l(()=>[e(_,{onClick:$,type:"primary"},{default:l(()=>s[16]||(s[16]=[o("立即保存")])),_:1}),e(_,{onClick:m},{default:l(()=>s[17]||(s[17]=[o("重置")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","closeOnClickModal"])}}},be={style:{display:"flex","align-items":"center"}},ye={style:{"margin-left":"4px"}},ve={__name:"PersonalUserList",setup(g){const h=G(),x=a=>le(Object.assign(a,{roleType:0})),r=q({searchType:"1",searchValue:"",userStatus:"",roleType:"",recentlyLogin:"",recentlyRegister:""}),y=q(),d=q(),D=q(),$=()=>{y.value.query()},m=()=>{d.value.resetFields(),r.value.searchType="1",y.value.query()},w=async a=>{if(console.log(a),!a.detail)try{const t=await ne(a.uid);a.detail=t.data}catch(t){console.log(t)}},s=()=>{D.value.open()},_=a=>{};return(a,t)=>{const V=u("el-option"),k=u("el-select"),v=u("el-input"),p=u("el-form-item"),R=u("el-button"),T=u("el-form"),C=u("el-table-column"),B=u("el-avatar"),I=u("el-table");return b(),A(N,null,[e(E,{ref_key:"tableViewRef",ref:y,"remote-method":x,query:r.value},{query:l(()=>[e(T,{ref_key:"queryFormRef",ref:d,model:r.value,inline:""},{default:l(()=>[e(p,{prop:"searchValue"},{default:l(()=>[e(v,{modelValue:r.value.searchValue,"onUpdate:modelValue":t[1]||(t[1]=n=>r.value.searchValue=n),placeholder:"请输入"},{prepend:l(()=>[e(k,{modelValue:r.value.searchType,"onUpdate:modelValue":t[0]||(t[0]=n=>r.value.searchType=n),style:{width:"100px"}},{default:l(()=>[e(V,{label:"账号信息",value:"1"}),e(V,{label:"简历姓名",value:"2"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"userStatus"},{default:l(()=>[e(k,{modelValue:r.value.userStatus,"onUpdate:modelValue":t[2]||(t[2]=n=>r.value.userStatus=n),placeholder:"用户状态",clearable:"",style:{width:"100px"}},{default:l(()=>[(b(!0),A(N,null,j(O(h).find("userStatus"),n=>(b(),U(V,{key:n.value,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"source"},{default:l(()=>[e(k,{modelValue:r.value.source,"onUpdate:modelValue":t[3]||(t[3]=n=>r.value.source=n),placeholder:"数据来源",clearable:"",style:{width:"100px"}},{default:l(()=>[(b(!0),A(N,null,j(O(h).find("source"),n=>(b(),U(V,{key:n.value,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"recentlyLogin"},{default:l(()=>[e(k,{modelValue:r.value.recentlyLogin,"onUpdate:modelValue":t[4]||(t[4]=n=>r.value.recentlyLogin=n),placeholder:"最近登录",clearable:"",style:{width:"120px"}},{default:l(()=>[(b(!0),A(N,null,j(O(h).find("timeStamps"),n=>(b(),U(V,{key:n.value,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"recentlyRegister"},{default:l(()=>[e(k,{modelValue:r.value.recentlyRegister,"onUpdate:modelValue":t[5]||(t[5]=n=>r.value.recentlyRegister=n),placeholder:"最近注册",clearable:"",style:{width:"120px"}},{default:l(()=>[(b(!0),A(N,null,j(O(h).find("timeStamps"),n=>(b(),U(V,{key:n.value,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,null,{default:l(()=>[e(R,{type:"primary",onClick:$},{default:l(()=>t[6]||(t[6]=[o("查询")])),_:1}),e(R,{onClick:m},{default:l(()=>t[7]||(t[7]=[o("重置")])),_:1})]),_:1}),e(p,null,{default:l(()=>[e(R,{onClick:s,type:"success"},{default:l(()=>t[8]||(t[8]=[o("添加用户")])),_:1})]),_:1})]),_:1},8,["model"])]),default:l(({list:n})=>[e(I,{data:n,"highlight-current-row":"",onExpandChange:w,style:{height:"100%"}},{default:l(()=>[e(C,{type:"expand"},{default:l(({row:i})=>[e(_e,{user:i.detail},null,8,["user"])]),_:1}),e(C,{prop:"uid",label:"UID"}),e(C,{prop:"",label:"用户/账号名称",width:"180"},{default:l(({row:i})=>[f("div",be,[e(B,{size:"small",src:i.headimg},{default:l(()=>t[9]||(t[9]=[f("img",{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"},null,-1)])),_:2},1032,["src"]),f("span",ye,c(i.nickname),1)])]),_:1}),e(C,{label:"手机号/邮箱"},{default:l(({row:i})=>[o(c(i.mobile||i.email),1)]),_:1}),e(C,{prop:"ipCity",label:"IP属地"},{default:l(({row:i})=>[e(R,{type:"primary",plain:"",size:"small",onClick:L=>_(i)},{default:l(()=>t[10]||(t[10]=[o("IP查询")])),_:2},1032,["onClick"])]),_:1}),e(C,{prop:"roleType",label:"身份",width:"120"},{default:l(({row:i})=>[e(P,{"enum-name":"roleType",value:i.roleType},null,8,["value"]),t[12]||(t[12]=o("   ")),i.userStatus==1?(b(),U(R,{key:0,type:"primary",plain:"",size:"small"},{default:l(()=>t[11]||(t[11]=[o("转换")])),_:1})):W("",!0)]),_:1}),e(C,{prop:"",label:"来源"},{default:l(({row:i})=>[e(P,{"enum-name":"isRealName",value:i.isRealName},null,8,["value"])]),_:1}),e(C,{prop:"isRealName",label:"实名"},{default:l(({row:i})=>[e(P,{"enum-name":"isRealName",value:i.isRealName},null,8,["value"])]),_:1}),e(C,{prop:"userStatus",label:"状态"},{default:l(({row:i})=>[i.userStatus==1?(b(),U(R,{key:0,type:"success",plain:"",size:"small"},{default:l(()=>t[13]||(t[13]=[o("正常")])),_:1})):W("",!0),i.userStatus==0?(b(),U(R,{key:1,type:"default",plain:"",size:"small"},{default:l(()=>t[14]||(t[14]=[o("禁用")])),_:1})):W("",!0)]),_:1}),e(C,{prop:"",label:"创建/更新时间"},{default:l(({row:i})=>[o(c(i.createTimeToDate)+" ",1),t[15]||(t[15]=f("br",null,null,-1)),o(" "+c(i.updateTimeToDate),1)]),_:1}),e(C,{label:"操作",width:"200"},{default:l(({row:i})=>[e(R,{type:"success",size:"small"},{default:l(()=>t[16]||(t[16]=[o("业务")])),_:1}),e(R,{type:"primary",size:"small"},{default:l(()=>t[17]||(t[17]=[o("编辑")])),_:1}),e(R,{size:"small"},{default:l(()=>t[18]||(t[18]=[o("更多")])),_:1})]),_:1})]),_:2},1032,["data"])]),_:1},8,["query"]),e(ce,{ref_key:"userEditFormRef",ref:D,title:"添加用户信息",onSuccess:()=>{y.value.query()}},null,8,["onSuccess"])],64)}}},ge={style:{display:"flex","align-items":"center"}},Ve={__name:"CompanyUserList",setup(g){const h=$=>le(Object.assign($,{roleType:1})),x=q({}),r=q(),y=q(),d=()=>{r.value.query()},D=()=>{y.value.resetFields()};return($,m)=>{const w=u("el-form-item"),s=u("el-button"),_=u("el-form"),a=u("el-table-column"),t=u("el-avatar"),V=u("el-table");return b(),U(E,{ref_key:"tableViewRef",ref:r,"remote-method":h,query:x.value},{query:l(()=>[e(_,{ref_key:"queryFormRef",ref:y,model:x.value,inline:""},{default:l(()=>[e(w),e(w,null,{default:l(()=>[e(s,{type:"primary",onClick:d},{default:l(()=>m[0]||(m[0]=[o("查询")])),_:1}),e(s,{type:"primary",onClick:D},{default:l(()=>m[1]||(m[1]=[o("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),default:l(({list:k})=>[e(V,{data:k,"highlight-current-row":""},{default:l(()=>[e(a,{type:"expand"},{default:l(({row:v})=>[f("pre",null,c(v),1)]),_:1}),e(a,{prop:"uid",label:"UID"}),e(a,{prop:"",label:"用户/账号名称",width:"180"},{default:l(({row:v})=>[f("div",ge,[e(t,{size:"small",src:v.headimg,style:{"margin-right":"4px"}},null,8,["src"]),f("span",null,c(v.nickname),1)])]),_:1}),e(a,{label:"手机号/邮箱"},{default:l(({row:v})=>[o(c(v.mobile||v.email),1)]),_:1}),e(a,{prop:"ipCity",label:"IP属地"}),e(a,{prop:"roleType",label:"身份"}),e(a,{prop:"",label:"来源"}),e(a,{prop:"isRealName",label:"实名"}),e(a,{prop:"userStatus",label:"状态"}),e(a,{prop:"",label:"创建/更新时间"},{default:l(({row:v})=>[o(c(v.createTimeToDate)+" ",1),m[2]||(m[2]=f("br",null,null,-1)),o(" "+c(v.updateTimeToDate),1)]),_:1}),e(a,{label:"操作"})]),_:2},1032,["data"])]),_:1},8,["query"])}}},ke={style:{display:"flex","align-items":"center"}},Re={class:"OpenIDs"},he={__name:"WechatUserList",setup(g){const h=($={})=>oe(Object.assign($)),x=q(),r=q(),y=M({name:"aaa"}),d=()=>{r.value.resetFields()},D=()=>{x.value.query()};return($,m)=>{const w=u("el-input"),s=u("el-form-item"),_=u("el-button"),a=u("el-form"),t=u("el-table-column"),V=u("el-avatar"),k=u("el-table");return b(),U(E,{ref_key:"tableView",ref:x,"remote-method":h,query:y},{query:l(()=>[e(a,{ref_key:"queryForm",ref:r,model:y,inline:""},{default:l(()=>[e(s,{label:"搜索类型",prop:"name"},{default:l(()=>[e(w,{modelValue:y.name,"onUpdate:modelValue":m[0]||(m[0]=v=>y.name=v)},null,8,["modelValue"])]),_:1}),e(s,null,{default:l(()=>[e(_,{onClick:D},{default:l(()=>m[1]||(m[1]=[o("查询")])),_:1}),e(_,{onClick:d},{default:l(()=>m[2]||(m[2]=[o("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),default:l(({list:v})=>[e(k,{data:v,"highlight-current-row":"",style:{height:"100%"}},{default:l(()=>[e(t,{type:"expand"},{default:l(({row:p})=>[f("pre",null,c(p),1)]),_:1}),e(t,{prop:"id",label:"ID"}),e(t,{prop:"uid",label:"UID"}),e(t,{label:"用户/账号名称",width:"180"},{default:l(({row:p})=>[f("div",ke,[Q(e(V,{size:"small",src:p.headimg,style:{"margin-right":"4px"}},null,8,["src"]),[[te,p.headimg]]),f("span",null,c(p.nickname),1)])]),_:1}),e(t,{label:"性别",prop:"sex"}),e(t,{prop:"city",label:"城市"}),e(t,{prop:"province",label:"省份"}),e(t,{prop:"country",label:"国家"}),e(t,{prop:"subscribe",label:"订阅"}),e(t,{label:"OpenID",width:"200"},{default:l(({row:p})=>[f("ul",Re,[f("li",null,[m[3]||(m[3]=f("span",null,"APP:",-1)),o(c(p.appOpenid),1)]),f("li",null,[m[4]||(m[4]=f("span",null,"公众号:",-1)),o(c(p.wxOpenid),1)]),f("li",null,[m[5]||(m[5]=f("span",null,"PC:",-1)),o(c(p.pcOpenid),1)]),f("li",null,[m[6]||(m[6]=f("span",null,"小程序:",-1)),o(c(p.mpOpenid),1)]),f("li",null,[m[7]||(m[7]=f("span",null,"Unionid:",-1)),o(c(p.unionid),1)])])]),_:1}),e(t,{label:"创建/更新时间",width:"180"},{default:l(({row:p})=>[o(c(p.createTimeToDate)+" ",1),m[8]||(m[8]=f("br",null,null,-1)),o(" "+c(p.updateTimeToDate),1)]),_:1})]),_:2},1032,["data"])]),_:1},8,["query"])}}},Ue=H(he,[["__scopeId","data-v-f8c3b327"]]),xe={__name:"AvatarAuditList",setup(g){const h=G(),x=M({searchType:"",searchValue:"",status:""}),r=q(),y=q(),d=q(),D=()=>{y.value.query()},$=()=>{r.value.resetFields(),x.searchType=""},m=()=>{const s=d.value.getSelectionRows();console.log(s),Y({businessIdList:s.map(_=>_.id),auditStatus:1}).then(()=>{F().success("成功"),y.value.query()}).catch(()=>{F().error("失败")})},w=()=>{const s=d.value.getSelectionRows();if(s&&s.length===0)return F().warning("未选择");ee().prompt({inputPlaceholder:"请输入拒绝原因",title:"拒绝",showCancelButton:!0,showClose:!0}).then(_=>{const{value:a}=_;Y({businessIdList:s.map(t=>t.id),auditStatus:2,msg:a}).then(()=>{F().success("成功"),y.value.query()}).catch(()=>{F().error("失败")})})};return(s,_)=>{const a=u("el-option"),t=u("el-select"),V=u("el-input"),k=u("el-form-item"),v=u("el-button"),p=u("el-form"),R=u("el-table-column"),T=u("el-image"),C=u("el-table"),B=X("loading");return b(),U(E,{ref_key:"listWrapRef",ref:y,"remote-method":O(ue),query:x},{query:l(({query:I})=>[e(p,{ref_key:"queryForm",ref:r,model:I,inline:""},{default:l(()=>[e(k,{prop:"searchValue"},{default:l(()=>[e(V,{placeholder:"请输入",modelValue:I.searchValue,"onUpdate:modelValue":n=>I.searchValue=n},{prepend:l(()=>[e(t,{modelValue:I.searchType,"onUpdate:modelValue":n=>I.searchType=n,style:{width:"100px"}},{default:l(()=>[e(a,{label:"UID",value:"1"}),e(a,{label:"手机号",value:"2"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(k,{label:"状态",prop:"status"},{default:l(()=>[e(t,{modelValue:I.status,"onUpdate:modelValue":n=>I.status=n,placeholder:"请选择",clearable:"",style:{width:"100px"}},{default:l(()=>[(b(!0),A(N,null,j(O(h).find("auditStatus"),n=>(b(),U(a,{key:n.label,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(k,null,{default:l(()=>[e(v,{type:"primary",onClick:D},{default:l(()=>_[0]||(_[0]=[o("查询")])),_:1}),e(v,{onClick:$},{default:l(()=>_[1]||(_[1]=[o("重置")])),_:1})]),_:1}),e(k,null,{default:l(()=>[e(v,{type:"success",onClick:m},{default:l(()=>_[2]||(_[2]=[o("批量通过")])),_:1}),e(v,{type:"danger",onClick:w},{default:l(()=>_[3]||(_[3]=[o("批量拒绝")])),_:1})]),_:1})]),_:2},1032,["model"])]),default:l(({list:I,loading:n})=>[Q((b(),U(C,{ref_key:"tableRef",ref:d,data:I,style:{height:"100%"}},{default:l(()=>[e(R,{type:"selection",width:"55"}),e(R,null,{default:l(({row:i})=>[e(T,{style:{width:"100px",height:"80px"},src:i.afterAvatar,fit:"fill"},null,8,["src"])]),_:1}),e(R,{prop:"uid",label:"UID"}),e(R,{prop:"nickname",label:"昵称"}),e(R,{label:"状态"},{default:l(({row:i})=>[e(P,{"enum-name":"auditStatus",value:i.status},null,8,["value"])]),_:1}),e(R,{prop:"rejectReason",label:"拒绝原因"},{default:l(({row:i})=>[o(c(i.status==2?i.rejectReason:""),1)]),_:1})]),_:2},1032,["data"])),[[B,n]])]),_:1},8,["remote-method","query"])}}},Te=H(xe,[["__scopeId","data-v-82554c56"]]),Se={style:{display:"flex","align-items":"center"}},we={style:{"margin-left":"4px"}},Ce={__name:"RealNameAuthList",setup(g){const h=G(),x=M({searchType:"",searchValue:"",status:0}),r=q(),y=q(),d=q(),D=()=>{y.value.query()},$=()=>{r.value.resetFields(),x.searchType=""},m=_=>{let a=new Array(5);for(let t=1;t<=5;t++)_[`img${t}`]&&(a[t-1]=_[`img${t}`]);return a.filter(t=>t)},w=_=>{const a=_.uid?[_]:d.value.getSelectionRows();if(a&&a.length===0){F().warning("未选择");return}Z({businessIdList:a.map(t=>t.id),auditStatus:1}).then(()=>{F().success("成功")}).catch(()=>{F().error("失败")})},s=_=>{let a=_.uid?[_]:d.value.getSelectionRows();if(a&&a.length===0)return F().warning("未选择");ee().prompt({inputPlaceholder:"请输入拒绝原因",title:"拒绝",showCancelButton:!0,showClose:!0}).then(t=>{const{value:V}=t;Z({businessIdList:a.map(k=>k.id),auditStatus:2,msg:V}).then(()=>{F().success("成功")}).catch(()=>{F().error("失败")})})};return(_,a)=>{const t=u("el-option"),V=u("el-select"),k=u("el-input"),v=u("el-form-item"),p=u("el-button"),R=u("el-form"),T=u("el-table-column"),C=u("el-avatar"),B=u("el-table"),I=X("image-preview"),n=X("loading");return b(),U(E,{ref_key:"listWrapRef",ref:y,"remote-method":O(se),query:x},{query:l(({query:i})=>[e(R,{ref_key:"queryForm",ref:r,model:i,inline:""},{default:l(()=>[e(v,{prop:"value"},{default:l(()=>[e(k,{placeholder:"请输入",modelValue:i.value,"onUpdate:modelValue":L=>i.value=L},{prepend:l(()=>[e(V,{modelValue:i.searchType,"onUpdate:modelValue":L=>i.searchType=L,style:{width:"100px"}},{default:l(()=>[e(t,{label:"UID",value:"1"}),e(t,{label:"身份证或统一社会信用代码",value:"2"}),e(t,{label:"名称",value:"3"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(v,{label:"状态",prop:"status"},{default:l(()=>[e(V,{modelValue:i.status,"onUpdate:modelValue":L=>i.status=L,placeholder:"请选择",clearable:"",style:{width:"100px"}},{default:l(()=>[(b(!0),A(N,null,j(O(h).find("auditStatus"),L=>(b(),U(t,{key:L.label,label:L.label,value:L.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(v,null,{default:l(()=>[e(p,{type:"primary",onClick:D},{default:l(()=>a[0]||(a[0]=[o("查询")])),_:1}),e(p,{onClick:$},{default:l(()=>a[1]||(a[1]=[o("重置")])),_:1})]),_:1}),e(v,null,{default:l(()=>[e(p,{type:"success",onClick:w},{default:l(()=>a[2]||(a[2]=[o("批量通过")])),_:1}),e(p,{type:"danger",onClick:s},{default:l(()=>a[3]||(a[3]=[o("批量拒绝")])),_:1})]),_:1})]),_:2},1032,["model"])]),default:l(({list:i,loading:L})=>[Q((b(),U(B,{ref_key:"tableRef",ref:d,data:i,style:{height:"100%"}},{default:l(()=>[e(T,{type:"selection",width:"55"}),e(T,{prop:"uid",label:"UID"}),e(T,{label:"用户"},{default:l(({row:S})=>[f("div",Se,[e(C,{size:"small",src:S.headimg},{default:l(()=>a[4]||(a[4]=[f("img",{src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"},null,-1)])),_:2},1032,["src"]),f("span",we,c(S.name),1)])]),_:1}),e(T,{prop:"roleType",label:"身份类型",width:"120"},{default:l(({row:S})=>[e(P,{"enum-name":"roleType",value:S.idType},null,8,["value"])]),_:1}),e(T,{prop:"nickname",label:"名称"}),e(T,{prop:"idNumber",label:"身份证或统一社会信用代码"}),e(T,{label:"图片"},{default:l(({row:S})=>[Q((b(),U(p,{size:"small",type:"info",plain:""},{default:l(()=>[o("查看("+c(m(S).length)+") ",1)]),_:2},1024)),[[I,{urlList:m(S)}]])]),_:1}),e(T,{label:"状态"},{default:l(({row:S})=>[e(P,{"enum-name":"auditStatus",type:"button","button-type-config":{success:"正常"},value:S.status},null,8,["value"])]),_:1}),e(T,{prop:"",label:"创建/更新时间",width:"180"},{default:l(({row:S})=>[o(c(S.createTime)+" ",1),a[5]||(a[5]=f("br",null,null,-1)),o(" "+c(S.updateTime),1)]),_:1}),e(T,{label:"操作"},{default:l(({row:S})=>[S.status==2?(b(),U(p,{key:0,onClick:J=>_.cancelRealName(S)},{default:l(()=>a[6]||(a[6]=[o("取消实名")])),_:2},1032,["onClick"])):W("",!0),S.status==0?(b(),A(N,{key:1},[e(p,{onClick:J=>w(S),type:"success",size:"small"},{default:l(()=>a[7]||(a[7]=[o("通过")])),_:2},1032,["onClick"]),e(p,{onClick:J=>s(S),type:"danger",size:"small"},{default:l(()=>a[8]||(a[8]=[o("拒绝")])),_:2},1032,["onClick"])],64)):W("",!0)]),_:1})]),_:2},1032,["data"])),[[n,L]])]),_:1},8,["remote-method","query"])}}},qe={__name:"list",setup(g){return(h,x)=>{const r=u("el-tab-pane"),y=u("el-tabs");return b(),U(y,{type:"border-card",class:"tabsBox"},{default:l(()=>[e(r,{label:"个人用户"},{default:l(()=>[e(ve)]),_:1}),e(r,{label:"企业用户"},{default:l(()=>[e(Ve)]),_:1}),e(r,{label:"微信用户"},{default:l(()=>[e(Ue)]),_:1}),e(r,{label:"头像审核"},{default:l(()=>[e(Te)]),_:1}),e(r,{label:"实名申请"},{default:l(()=>[e(Ce)]),_:1})]),_:1})}}},Fe=H(qe,[["__scopeId","data-v-e4ba6bc5"]]);export{Fe as default};
